(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{4702:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,24785,23)),Promise.resolve().then(a.t.bind(a,17708,23)),Promise.resolve().then(a.t.bind(a,30347,23)),Promise.resolve().then(a.t.bind(a,68413,23)),Promise.resolve().then(a.bind(a,58431)),Promise.resolve().then(a.bind(a,17146))},58431:(e,t,a)=>{"use strict";a.d(t,{default:()=>u});var s=a(95155),r=a(12115),l=a(17146),i=a(14505),n=a(67401);let c=(0,n.A)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),o=(0,n.A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),d=(0,n.A)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);function u(){let{user:e,loading:t,error:a,login:n,logout:u,canEdit:h}=(0,l.A)(),[m,x]=(0,r.useState)(""),[b,g]=(0,r.useState)(""),[p,y]=(0,r.useState)(!1),v=async e=>{e.preventDefault(),y(!0);try{await n(m,b),x(""),g("")}catch(e){console.error("Login error:",e)}finally{y(!1)}};return t?(0,s.jsx)("div",{className:"fixed top-0 right-0 h-screen w-80 bg-white shadow-lg p-6 flex items-center justify-center",children:(0,s.jsx)(i.A,{className:"h-8 w-8 animate-spin text-blue-500"})}):(0,s.jsx)("div",{className:"fixed top-0 right-0 h-screen w-80 bg-white shadow-lg p-6 text-right",children:e?(0,s.jsx)("div",{className:"space-y-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("button",{onClick:()=>u(),className:"text-gray-600 hover:text-gray-800",children:(0,s.jsx)(c,{className:"h-5 w-5"})}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("p",{className:"font-medium",children:e.email}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:h?"הרשאת עריכה":"צפייה בלבד"})]}),(0,s.jsx)("div",{className:"bg-blue-100 p-2 rounded-full",children:(0,s.jsx)(o,{className:"h-5 w-5 text-blue-600"})})]})]})}):(0,s.jsxs)("form",{onSubmit:v,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold",children:"התחברות"}),(0,s.jsx)(d,{className:"h-5 w-5 text-gray-400"})]}),a&&(0,s.jsx)("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg text-sm",children:a}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"דואר אלקטרוני"}),(0,s.jsx)("input",{type:"email",value:m,onChange:e=>x(e.target.value),className:"w-full px-3 py-2 border rounded-lg text-right",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"סיסמה"}),(0,s.jsx)("input",{type:"password",value:b,onChange:e=>g(e.target.value),className:"w-full px-3 py-2 border rounded-lg text-right",required:!0})]}),(0,s.jsx)("button",{type:"submit",disabled:p,className:"w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:p?(0,s.jsx)(i.A,{className:"h-5 w-5 animate-spin mx-auto"}):"התחבר"})]})})}},17146:(e,t,a)=>{"use strict";a.d(t,{A:()=>o,AuthProvider:()=>c});var s=a(95155),r=a(12115),l=a(6698),i=a(14565);let n=(0,r.createContext)({user:null,loading:!0,error:null,login:async()=>{throw Error("AuthContext not initialized")},logout:async()=>{throw Error("AuthContext not initialized")},canEdit:!1});function c(e){let{children:t}=e,[a,c]=(0,r.useState)(null),[o,d]=(0,r.useState)(!0),[u,h]=(0,r.useState)(null),[m,x]=(0,r.useState)(!1),b=async(e,t)=>{try{h(null),await (0,i.x9)(l.j,e,t)}catch(t){let e="שגיאת התחברות. אנא בדקו את הפרטים ונסו שוב.";throw h(e),Error(e)}},g=async()=>{try{await (0,i.CI)(l.j)}catch(t){let e="שגיאה בהתנתקות. אנא נסו שוב.";throw h(e),Error(e)}};return(0,r.useEffect)(()=>{let e=(0,i.hg)(l.j,e=>{c(e),x(!!e),d(!1)});return()=>e()},[]),(0,s.jsx)(n.Provider,{value:{user:a,loading:o,error:u,login:b,logout:g,canEdit:m},children:t})}function o(){return(0,r.useContext)(n)}},6698:(e,t,a)=>{"use strict";a.d(t,{O:()=>c,j:()=>n});var s=a(49904),r=a(14565),l=a(38698);let i=(0,s.Wp)({apiKey:"AIzaSyDdzBZXdCvnGbzatGfc47co58RNc7h6GSQ",authDomain:"geomai21.firebaseapp.com",databaseURL:"https://geomai21-default-rtdb.firebaseio.com",projectId:"geomai21",storageBucket:"geomai21.firebasestorage.app",messagingSenderId:"897053614981",appId:"1:897053614981:web:5c99107fc80fbcab881aec",measurementId:"G-FBRB6WPJF9"}),n=(0,r.xI)(i),c=(0,l.C3)(i)},68413:()=>{},30347:()=>{},17708:e=>{e.exports={style:{fontFamily:"'geistMono', 'geistMono Fallback'"},className:"__className_c3aa02",variable:"__variable_c3aa02"}},24785:e=>{e.exports={style:{fontFamily:"'geistSans', 'geistSans Fallback'"},className:"__className_1e4310",variable:"__variable_1e4310"}}},e=>{var t=t=>e(e.s=t);e.O(0,[146,507,371,756,441,517,358],()=>t(4702)),_N_E=e.O()}]);